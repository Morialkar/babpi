<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>
    <table class="table table-striped">
        <thead><tr>
            <th>#</th>
            <th>Date</th>
            <th>Is</th>
            <th>Red</th>
            <th>Blue</th>
        </tr></thead>
        <tbody id="gameTable"></tbody>
    </table>
    <script src='/jquery.min.js'></script>
    <script>
        var $tbody = $('#gameTable');
        var games = /*%games%*/;

        games.forEach(function(game, index){
            var isWin = game.is == 'win';
            var row = $('<tr>');
            row.append($('<td>').text(games.length - index));
            row.append($('<td>').text((new Date(game.date)).toLocaleDateString()));
            row.append($('<td>').text(game.is));
            row.append($('<td>').text(game.redPlayers.join(' ')+" ("+game.redScore+")")
                    .toggleClass('success', (isWin && (game.redScore > game.blueScore))
            ));
            row.append($('<td>').text(game.bluePlayers.join(' ')+" ("+game.blueScore+")")
                    .toggleClass('success', (isWin && (game.redScore < game.blueScore))
            ));

            $tbody.append(row);
        });
    </script>
</body>
</html>
